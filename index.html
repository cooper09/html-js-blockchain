<!Doctype html>
<head>
  <script src='hmac-sha256.js'></script>
  <script src='blockchain.js'></script>  
</head>
<body>
    My Blockchain
    <div id="renderList"></div>
</body>
</html>
<script>

const timestamp =  new Date().getTime();

let testCoin = new Blockchain();

testCoin.createTransaction(new Transaction('address1','address2', 100));
testCoin.createTransaction(new Transaction('address2','address1', 50));

console.log("\n Starting up the 7 dwarfs...");
testCoin.minePendingTransactions('mystery-address');

console.log('\n Mystery Balance: ', testCoin.getBalanceOfAddress('mystery-address'));

console.log("the next day...")
testCoin.minePendingTransactions('mystery-address');
console.log('\n Mystery Balance: ', testCoin.getBalanceOfAddress('mystery-address'));

//testCoin.addBlock(new Block (1,timestamp, {amount: 4}));  //hash is generated inside the block

//testCoin.addBlock(new Block (2,timestamp, {amount: 10}));

console.log("TSC ", testCoin );
console.log("UIs chain valid 1: ", testCoin.validate());

console.log("current chain: ", testCoin.chain[1].hash );

for (var i=1 ; i < testCoin.chain.length ; i++ ) {
  console.log("Block: ", testCoin.chain[i]," hash: ", testCoin.chain[i].nonce )
}
// List our blockchain goodies...
var ul = document.createElement('ul');
ul.setAttribute('id','blockChain');

document.getElementById('renderList').appendChild(ul);
testCoin.chain.forEach(renderChainList);

function renderChainList(element, index, arr ) {
  console.log("renderChainList: ", element )
  var li = document.createElement('li');
    li.setAttribute('class','item');
 
    ul.appendChild(li);

    li.innerHTML=li.innerHTML +"<b>Hash:</b> " + element.hash +" <b>Nonce:</b> "+ element.nonce + " <b>Timestamp:</b> " + element.timestamp;
}//end render chain list

</script>